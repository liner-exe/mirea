# Задание 3_1_1 - Передача объекта в функцию в качестве параметра

## 1 ПОСТАНОВКА ЗАДАЧИ

Сконструировать систему, которая демонстрирует особенности при
передаче объекта в функцию в качестве параметра. Показывает, какого характера
ошибки могут возникнуть при выполнении такой передачи и как их обойти.

Спроектировать объект (разработать описание класса), который имеет
свойства:
- переменную целого типа в закрытом доступе, содержит количество
элементов массива;
- указатель на массив целого типа в открытом доступе.
Функционал объекта:
- параметризованный конструктор, с одним целочисленным параметром.
С новой строки выводит сообщение, что работает параметризированный
конструктор. Конструктор создает массив целочисленного типа размерности
согласно значению параметра. Каждому элементу присваивает значение
равное квадрату соответствующего индекса;
- конструктор по умолчанию. Выдает сообщение, что работает
конструктор по умолчанию;
- метод, в открытом доступе, который выводит значения элементов
массива с новой строки, разделенным тремя пробелами;
- метод, в открытом доступе, который меняет знак каждого второго
элемента массива;
- метод, в открытом доступе, который освобождает память, выделенную
для массива;
- деструктор, выдает с новой строки сообщение, что работает деструктор.

Разработать функцию, которой в качестве параметра передается объект
спроектированного класса. В описании функции реализовать алгоритм:

1. Для объекта, переданного в качестве параметра вызов метода, который
меняет знак значений части элементов массива.
2. Вызов метода вывода содержимого массива.
Исходный алгоритм сборки и отработки системы:
1. Вводит целочисленное, положительное значение, размещает в
целочисленной переменной.
2. Объявляет объект с использованием параметризированного конструктора,
в качестве аргумента передает целочисленную переменную, которая
содержит введенное значение.
3. Вызывает метод вывода значений элементов объявленного объекта.
4. Вызывает функцию, которой в качестве аргумента передает объявленный
объект.
5. Вызывает метод вывода значений элементов объявленного объекта.
6. Вызов метода для освобождения памяти для массива.
7. Завершение работы системы.
Доработайте конструкцию (не меняя описание класса), алгоритм сборки и
отработки системы так, чтобы выводимые значения во второй и пятой строке
совпали.

### Входные данные
Первая строка:<br>
`«Целое число»`

### Выходные данные
Конструктор по умолчанию выводит сообщение:<br>
`Default constructor`<br>
Параметризированный конструктор выводит сообщение:<br>
`Parameterized constructor`<br>
Деструктор выводит сообщение:<br>
`Destructor`<br>
Метод вывода значений элементов массива выводит последовательность
чисел:<br>
`«целое число» «целое число» «целое число» . . .`

Пример вывода<br>
До доработки системы<br>

`Parameterized constructor`<br>
`0 1 4 9 16`<br>
`0 -1 4 -9 16`<br>
`Destructor`<br>
`0 -1 4 -9 16`<br>
`Destructor`<br>

После доработки системы<br>
`Parameterized constructor`<br>
`0 1 4 9 16`<br>
`0 -1 4 -9 16`<br>
`Destructor`<br>
`0 1 4 9 16`<br>
`Destructor`


## 2 МЕТОД РЕШЕНИЯ

Для решения задачи используется:
- объект obj класса MyArray предназначен для демонстрации работы
программы;
- функция processArray для создания копии объекта;
- функция main для определения входной точки программы;
- указатель;
- класс;
- заголовочный файл;
- стандартная библиотека ввода-вывода.
- динамический массив.

Класс MyArray:
- свойства/поля:
    - поле хранит размер массива:
        - наименование — m_size;
        - тип — int;
        - модификатор доступа — private;
    - поле хранит массив с квадратами индексов:
        - наименование — arr;
        - тип — int*;
        - модификатор доступа — public;
- функционал:
    - метод MyArray — конструктор по умолчанию;
    - метод MyArray — создаёт массив длины n, который содержит
квадраты индексов;
    - метод ~MyArray — выводит Destructor;
    - метод printArray — п=выводит все элементы массива, разделённые тремя пробелами;
    - метод changeSign — меняет знак каждого второго элемента на противоположный;
    - метод releaseMemory — освобождает память, выделенную на массив arr.

## 3 ОПИСАНИЕ АЛГОРИТМОВ

### Конструктор класса MyArray
- Функционал: Конструктор по умолчанию.
- Параметры: нет.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Вывод "Constructor"  | 0 |

### Конструктор класса MyArray
- Функционал: Создаёт массив длины n, который содержит квадраты
индексов.
- Параметры: int n.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Вывод "Parameterized constructor"  | 2 |
| 2 | | Инициализация m_size = n   | 3 |
| 3 | | Создание динамического целочисленного массива arr длины m_size  | 4 |
| 4 | | Инициализация int i = 0  | 5 |
| 5 | i < m_size | arr[i] = i * i  | 5 |
|  | |  | 0 |

### Деструктор класса MyArray
- Функционал: Выводит Destructor.
- Параметры: нет.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Вывод "Destructor"  | 0 |

### Метод printArray класса MyArray
- Функционал: Меняет знак каждого второго элемента на противоположный.
- Параметры: нет.
- Возвращаемое значение: void.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Инициализация int i = 0  | 2 |
| 2 | i < m_size | Вывод arr[i] | 3 |
| | | | 4 |
| 3 | i != m_size - 1 | Вывод трёх пробелов | 2 |
| | | | 2 |
| 4 | | Вывод "\n" | 0 |

### Метод changeSign класса MyArray
- Функционал: Меняет знак каждого второго элемента на противоположный.
- Параметры: нет.
- Возвращаемое значение: void.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Инициализация int i = 1  | 2 |
| 2 | i < m_size | arr[i] = -arr[i]   | 3 |
| | | | 0 |
| 3 | | i += 2 | 2 |

### Метод releaseMemory класса MyArray
- Функционал: Освобождает память, выделенную на массив arr.
- Параметры: нет.
- Возвращаемое значение: void.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Освобождение памяти указателя на массив arr с помощью оператора
delete[] | 0 |

### Функция processArray
- Функционал: Создание копии объекта.
- Параметры: MyArray obj.
- Возвращаемое значение: void.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | Вызов obj.changeSign()  | 2 |
| 2 | | Вызов obj.printArray()  | 3 |
| 3 | | Вызов obj.changeSign()  | 0 |

### Функция main
- Функционал: Входная точка программы.
- Параметры: нет.
- Возвращаемое значение: int.

| № | Предикат | Действия | № перехода |
| - | -------- | -------- | ---------- |
| 1 | | int size  | 2 |
| 2 | | Ввод size  | 3 |
| 3 | | Создание объекта obj класса MyArray с помощью оператора new с выделением памяти указателя | 4 |
| 4 | | Вызов obj->printArray()   | 5 |
| 5 | | Вызов processArray(*obj) | 6 |
| 6 | | Вызов obj->printArray() | 7 |
| 7 | | Вызов obj->releaseMemory() | 8 |
| 8 | | Удаление объекта obj с помощью оператора delete сосвобождением памяти указателя | 0 |

## 4 БЛОК-СХЕМА

<i>Блок-схемы будут позднее</i>

## 5 ИСХОДНЫЙ КОД

### main.cpp
```cpp
#include "MyArray.h"
void processArray(MyArray obj)
{
    obj.changeSign();
    obj.printArray();
    obj.changeSign();
}

int main()
{
    int size;
    std::cin >> size;

    MyArray* obj = new MyArray(size);
    obj->printArray();

    processArray(*obj);

    obj->printArray();
    obj->releaseMemory();

    delete obj;

    return 0;
}
```

### MyArray.cpp
```cpp
#include "MyArray.h"

MyArray::MyArray()
{
    std::cout << "Default constructor" << std::endl;
}

MyArray::MyArray(int n)
{
    std::cout << "Parameterized constructor" << std::endl;
    m_size = n;

    arr = new int[m_size];

    for (int i = 0; i < m_size; i++)
    {   
        arr[i] = i * i;
    }
}

MyArray::~MyArray()
{
    std::cout << "Destructor" << std::endl;
}

void MyArray::printArray()
{
    for (int i = 0; i < m_size; i++)
    {
        std::cout << arr[i];
        if (i != m_size - 1) std::cout << " ";
    }
    std::cout << std::endl;
}

void MyArray::changeSign()
{
    for (int i = 1; i < m_size; i += 2)
    {
        arr[i] = -arr[i];
    }
}

void MyArray::releaseMemory()
{
    delete[] arr;
}
```

### MyArray.h
```cpp
#ifndef __MYARRAY__H
#define __MYARRAY__H

#include <iostream>

class MyArray
{
    int m_size;
public:
    int* arr;

    MyArray();
    MyArray(int);
    ~MyArray();

    void printArray();
    void changeSign();
    void releaseMemory();
};

#endif
```

## 6 ТЕСТИРОВАНИЕ
| Входные данные | Ожидаемые выходные данные | Фактические выходные данные |
| -------- | -------- | ---------- |
| 5  | Parameterized<br>constructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>0&nbsp;&nbsp;&nbsp;-1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;-9&nbsp;&nbsp;&nbsp;16<br>Destructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>Destructor | Parameterized<br>constructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>0&nbsp;&nbsp;&nbsp;-1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;-9&nbsp;&nbsp;&nbsp;16<br>Destructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>Destructor |
| 10  | Parameterized<br>constructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;81<br>0&nbsp;&nbsp;&nbsp;-1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;-9&nbsp;&nbsp;&nbsp;16<br>-25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;-49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;-81<br>Destructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;81<br>Destructor | Parameterized<br>constructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;81<br>0&nbsp;&nbsp;&nbsp;-1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;-9&nbsp;&nbsp;&nbsp;16<br>-25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;-49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;-81<br>Destructor<br>0&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;16<br>25&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;64&nbsp;&nbsp;&nbsp;81<br>Destructor |
